<html ng-app='app'>

<head>

	<meta charset='utf-8'>
	<link rel="stylesheet" href="libs/normalize.css"/>
	<link rel="stylesheet" href="css/estilo.css"/>
	<link rel="stylesheet" href="libs/bootstrap.css"/>

	<script src='libs/jquery.js'></script>
	<script src='libs/angular.js'></script>

	<script src='libs/angular-animate.js'></script>
	<script src='libs/angular-route.js'></script>
	<script src='libs/ui-bootstrap-tpls.js'></script>

	<script src='libs/fastclick.js'></script>
	<script src='libs/jquery.placeholder.js'></script>
	<script src='libs/modernizr.js'></script>
	<script src='libs/fabric.js'></script>

	<script src='js/app.js'></script>
	<script src='js/controllers/AvatarCtrl.js'></script>
	<script src='js/controllers/MainCtrl.js'></script>
	<script src='js/controllers/GaleriaCtrl.js'></script>

	<script src='js/factories/CanvasFactory.js'></script>
	<script src='js/factories/ConfigFactory.js'></script>

	<title>Karucha</title>

</head>

<body ng-controller='MainCtrl'>



	<div class="navbar navbar-inverse">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-inverse-collapse">
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" href="#">Karucha</a>
		</div>
		<div class="navbar-collapse collapse navbar-inverse-collapse">
			<ul class="nav navbar-nav">
				<li class="dropdown">
					<a href="#" class="dropdown-toggle" data-toggle="dropdown">Archivo <b class="caret"></b></a>
					<ul class="dropdown-menu">
						<li><a href="" ng-click="todo('abrir')">Abrir</a></li>
						<li><a href="" ng-click="todo('guardar png')">Guardar como PNG</a></li>
						<li><a href="" ng-click="todo('guardar svg')">Guardar como SVG</a></li>
						<li class="divider"></li>
						<li><a href="" ng-click="todo('salir')">Salir</a></li>
					</ul>
				</li>
			</ul>
			<ul class="nav navbar-nav navbar-right">
				<li><a href='' ng-click='abrir_modo_desarrollador()'>&nbsp;<i class="glyphicon glyphicon-cog"></i></a></li>
				<li><a href='' ng-click='actualizar()'>&nbsp;<i class="glyphicon glyphicon-refresh"></i></a></li>
			</ul>
		</div>
	</div>




	<div>
		<div ng-controller='AvatarCtrl' class="avatar">
			<canvas id='canvas' width=400 height=400></canvas>

			<div class='botones'>
				<button ng-click="guargar_png()" class='btn btn-tiny btn-success'><i class="fi-download"></i> Guardar PNG</button>
				<button ng-click="guardar_svg()" class='btn btn-tiny btn-warning'><i class="fi-download"></i> Guardar SVG</button>
				<button ng-click="borrar_elemento_seleccionado()" class='btn btn-tiny btn-danger'><i class="fi-x"></i> Borrar elemento</button>
			</div>
		</div>

		<div ng-controller='GaleriaCtrl' class="galeria">
			<tabset>
				<tab ng-repeat="dir in data.directorios" heading="{{dir.titulo}}" active="dir.active">

					<div ng-show='! dir.tiene_preferencias' data-alert class="alert-box secondary">
						m... el directorio <code>partes/{{dir.titulo}}</code> no tiene un archivo <code>preferencias.json</code> dentro, mejor cre√° uno.
					</div>


					<ul class="clearing-thumbs" data-clearing="" style="">
						<li ng-repeat='obj in dir.objetos'><a ng-click='selecciona_objeto(obj, dir)' href='#' class="th objeto"><img class='resize_fit_center' ng-src="{{obj.src}}"></a></li>
						<li><a ng-click='abrir_directorio(dir)' href='#' class="th objeto"><img class='resize_fit_center' src='imagenes/agregar.png'></a></li>
					</ul>

				</tab>
			</tabset>

		</div>
	</div>

<div class='invisible'>
	<input id="guardar_svg" type="file" nwsaveas="avatar.svg" accept="svg/*.svg"/>
	<input id="guardar_png" type="file" nwsaveas="avatar.png" accept="png/*.png"/>
</div>

</body>
</html>
